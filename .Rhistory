usethis::use_apache_license()
test_fun
devtools::load_all(".")
test_fun()
usethis::use_package("dplyr")
usethis::use_dev_package("harpIO", remote = "andrew-met/harpIO@develop")
?harpIO::read_forecast
devtools::load_all(".")
read_meps(2022042600, "T2m", lead_time = 0)
devtools::load_all(".")
read_meps(2022042600, "T2m", lead_time = 0)
read_meps(2022042600, "T2m", lead_time = 0, return_data = TRUE)
read_meps(2022042600, "T2m", lead_time = c(0, 10), members = c(0, 14), return_data = TRUE)
library(harpMET)
read_meps(
2022042600,
"T2m",
lead_time = c(0, 10),
members = c(0, 14),
return_data = TRUE
)
library(harpMET)
test_fun("hello")
library(harpMET)
usethis::use_package_doc()
?harpIO::interpolate_opts
source("~/R-packages/harpMET/R/read_meps.R")
library(harpMET)
?read_meps
library(harpMET)
library(harpMET)
usethis::use_github()
?usethis::use_github
usethis::use_github(protocol = "ssh")
gitcreds::gitcreds_set()
usethis::use_github(protocol = "ssh")
library(harpMET)
library(harpMET)
?read_met_analysis
read_met_analysis(
seq_dates(2022081612, 2022081615, "1h")
"Pcp",
read_met_analysis(
seq_dates(2022081612, 2022081615, "1h")
"Pcp"
seq_dates(2022081612, 2022081615, "1h")
library(harpMET)
library(harpIO)
read_met_analysis(
seq_dates(2022081612, 2022081615, "1h")
"Pcp"
library(harpMET)
library(harpIO)
read_met_analysis(
seq_dates(2022081612, 2022081615, "1h"),
"Pcp"
)
library(harpMET)
library(harpIO)
read_met_analysis(
seq_dates(2022081612, 2022081615, "1h"),
"Pcp"
)
library(harpMET)
library(harpIO)
read_met_analysis(
seq_dates(2022081612, 2022081615, "1h"),
"Pcp"
)
library(harpMET)
library(harpIO)
read_met_analysis(
seq_dates(2022081612, 2022081615, "1h"),
"Pcp"
)
library(harpIO)
read_met_analysis(
seq_dates(2022081612, 2022081615, "1h"),
"T2m"
)
3 |> print()
aaa
ls()
a <- 3
exists(a)
exists("a")
library(harpMET)
res[[1]] <- dplyr::mutate(res[[1]], parameter = pcp_name)
read_met_analysis(
seq_dates(2022081612, 2022081615, "1h"),
"T2m"
)
read_met_analysis(
seq_dates(2022081612, 2022081615, "1h"),
"Pcp"
)
read_met_analysis(
seq_dates(2022081612, 2022081615, "1h"),
"pcp"
)
library(harpMET)
library(harpMET)
read_aa(2022081500, "T2m", 0)
library(harpMET)
read_aa(2022081500, "T2m", 0)
library(ncdf4)
id <- nc_open("/lustre/storeB/immutable/archive/projects/metproduction/DNMI_AROME_ARCTIC/2022/08/15/arome_arctic_det_2_5km_20220815T00Z.nc")
lat <- ncvar_get(id, "latitude")
lon <- ncvar_get(id, "longitude")
dim(lon)
dim(lat)
x <- c(lon[1, 1:ncol(lon)], lon[1:nrow(lon), ncol(lon)], lon[nrow(lon), ncol(lon):1], lon[nrow(lon):1, 1])
y <- c(lat[1, 1:ncol(lat)], lat[1:nrow(lat), ncol(lat)], lat[nrow(lat), ncol(lat):1], lat[nrow(lat):1, 1])
plot(x, y, type = "l")
polygon(x, y)
dom_coords <- mapply(function(x, y) c(x, y), x, y, SIMPLIFY = FALSE)
dom_coords
library(jsonlite)
toJSON(dom_coords)
write_json(dom_coords, "/home/andrewts/Documents/arctic_risk_nov2022/aa_domain.json")
library(harpMET)
read_alertnes(2018030800, "T2m")
source("~/R-packages/harpMET/R/read_alertness.R")
library(harpMET)
View(read_alertnes)
rm(read_alertnes())
rm(read_alertnes)
read_alertnes(2018030800, "T2m", lead_time = 0)
read_alertnes(2018030800, "T500", lead_time = 0)
harpIO::read_grid("/lustre/storeB/project/nwp/alertness/wp4/REF/netcdf/fc2018030800_fp.nc", "T500", lead_time = 0)
harpIO::read_grid("/lustre/storeB/project/nwp/alertness/wp4/REF/netcdf/fc2018030800_fp.nc", "T500", lead_time = 0, file_format_opts = harpIO::netcdf_opts("met_norway_eps"))
harpIO::read_grid("/lustre/storeB/project/nwp/alertness/wp4/REF/netcdf/fc2018030800_fp.nc", "T500", lead_time = 0, file_format_opts = harpIO::modify_opts(harpIO::netcdf_opts("met_norway_eps")), z_var = "pressure0")
harpIO::read_grid("/lustre/storeB/project/nwp/alertness/wp4/REF/netcdf/fc2018030800_fp.nc", "T500", lead_time = 0, file_format_opts = harpIO::modify_opts(harpIO::netcdf_opts("met_norway_eps"), z_var = "pressure0"))
read_alertnes(2018030800, "T2m", lead_time = 0)
library(harpVis)
read_alertnes(2018030800, "T2m", lead_time = 0) -> t2m
library(harpMET)
read_alertnes(2018030800, "T2m", lead_time = 0) -> t2m
t2m
plot_field(t2m, plot_col = REF_mbr000)
plot_field(t2m, "REF", plot_col = REF_mbr000)
library(harpPoint)
library(dplyr)
t2m <- mutate(t2m, across(starts_with("REF"), .x -273.15))
t2m <- mutate(t2m, across(starts_with("REF"), ~.x -273.15))
plot_field(t2m, "REF", plot_col = REF_mbr000)
plot_field(t2m, "REF", plot_col = REF_mbr000, breaks = seq(-30, 10))
plot_field(t2m, "REF", plot_col = REF_mbr000, breaks = seq(-30, 10, 2))
plot_field(t2m, "REF", plot_col = REF_mbr002, breaks = seq(-30, 10, 2))
plot_field(t2m$REF$REF_mbr002 - t2m$REF$REF_mbr000)
plot_field((t2m$REF$REF_mbr002 - t2m$REF$REF_mbr000)[[1]])
plot_field((t2m$REF$REF_mbr002 - t2m$REF$REF_mbr000)[[1]], breaks = seq(-7, 7))
plot_field((t2m$REF$REF_mbr002 - t2m$REF$REF_mbr000)[[1]], breaks = seq(-7, 7), palette = RColorBrewer::brewer.pal(9, "RdBu"))
plot_field((t2m$REF$REF_mbr001 - t2m$REF$REF_mbr000)[[1]], breaks = seq(-7, 7), palette = RColorBrewer::brewer.pal(9, "RdBu"))
plot_field((t2m$REF$REF_mbr003 - t2m$REF$REF_mbr000)[[1]], breaks = seq(-7, 7), palette = RColorBrewer::brewer.pal(9, "RdBu"))
plot_field((t2m$REF$REF_mbr004 - t2m$REF$REF_mbr000)[[1]], breaks = seq(-7, 7), palette = RColorBrewer::brewer.pal(9, "RdBu"))
read_alertnes(2018030800, "T2m", lead_time = c(0, 3, 27) -> t2m
read_alertnes(2018030800, "T2m", lead_time = c(0, 3, 27)) -> t2m
plot_field((t2m$REF$REF_mbr004 - t2m$REF$REF_mbr000)[[1]], breaks = seq(-7, 7), palette = RColorBrewer::brewer.pal(9, "RdBu"))
get_domain(t2m, meps_mbr000)
get_domain(t2m)
?get_domain
get_domain(t2m$REF, REF_mbr000)
png("/home/andrewts/Documents/arctic_risk_nov2022/time_0.png", width = 750, height = 1000)
plot_field(t2m, "REF", lead_time = 0, plot_col = REF_mbr000, breaks = seq(-30, 10, 2))
dev.off()
t2m <- mutate(t2m, across(starts_with("REF"), ~.x -273.15))
png("/home/andrewts/Documents/arctic_risk_nov2022/time_0.png", width = 750, height = 1000)
plot_field(t2m, "REF", lead_time = 0, plot_col = REF_mbr000, breaks = seq(-30, 10, 2))
dev.off()
png("/home/andrewts/Documents/arctic_risk_nov2022/time_3.png", width = 750, height = 1000)
plot_field(t2m, "REF", lead_time = 3, plot_col = REF_mbr000, breaks = seq(-30, 10, 2))
dev.off()
t2m
t2m <- gather_members(t2m)
t2m
t2m <- t2m$REF
mmm <- get_map(dom = get_domain(t2m, forecast), poly = FALSE)
mmm
ggplot() + geom_georaster(aes(geofield = forecast), filter(t2m, lead_time == 3)) + geom_path(aes(x, y), mmm) + facet_wrap(vars(member))
ggplot() + geom_georaster(aes(geofield = forecast), filter(t2m, lead_time == 3)) + geom_path(aes(x, y), mmm) + facet_wrap(vars(member)) + scale_fill_viridis_c()
ggplot() + geom_georaster(aes(geofield = forecast), filter(t2m, member == "REF_mbr002")) + geom_path(aes(x, y), mmm) + facet_wrap(vars(lead_time)) + scale_fill_viridis_c()
filter(t2m, member == "REF_mbr002")
t2m
ggplot() + geom_georaster(aes(geofield = forecast), filter(t2m, member == "mbr002")) + geom_path(aes(x, y), mmm) + facet_wrap(vars(lead_time)) + scale_fill_viridis_c()
read_alertnes(2018030800, "T2m", lead_time = c(0, 3, 12, 27, 36) -> t2m
read_alertnes(2018030800, "T2m", lead_time = c(0, 3, 12, 27, 36)) -> t2m
t2m <- gather_members(t2m)
t2m <- t2m$REF
t2m <- mutate(t2m, forecast = forecast - 273.15)
ggplot() + geom_georaster(aes(geofield = forecast), filter(t2m, member == "mbr002")) + geom_path(aes(x, y), mmm) + facet_wrap(vars(lead_time)) + scale_fill_viridis_c()
ggplot() + geom_georaster(aes(geofield = forecast), filter(t2m, member == "mbr002")) + geom_path(aes(x, y), mmm) + facet_wrap(vars(lead_time)) + scale_fill_viridis_c(limits = c(-10, 10))
ggplot() + geom_georaster(aes(geofield = forecast), filter(t2m, member == "mbr002")) + geom_path(aes(x, y), mmm) + facet_wrap(vars(lead_time)) + scale_fill_viridis_c(limits = c(-10, 10), oob = scales::oob_squish())
ggplot() + geom_georaster(aes(geofield = forecast), filter(t2m, member == "mbr002")) + geom_path(aes(x, y), mmm) + facet_wrap(vars(lead_time)) + scale_fill_viridis_c(limits = c(-10, 10), oob = scales::oob_squish)
ggplot() + geom_georaster(aes(geofield = forecast), filter(t2m, member == "mbr002")) + geom_path(aes(x, y), mmm) + facet_wrap(vars(lead_time)) + scale_fill_viridis_c(limits = c(-20, 5), oob = scales::oob_squish)
ggplot() + geom_georaster(aes(geofield = forecast), filter(t2m, lead_time == 36)) + geom_path(aes(x, y), mmm) + facet_wrap(vars(member)) + scale_fill_viridis_c(limits = c(-20, 5), oob = scales::oob_squish)
read_alertnes(2018080100, "T2m", lead_time = c(0, 3, 12, 27, 36) -> t2m
read_alertnes(2018080100, "T2m", lead_time = c(0, 3, 12, 27, 36)) -> t2m
t2m <- gather_members(t2m)
t2m <- t2m$REF
t2m <- mutate(t2m, forecast = forecast - 273.15)
ggplot() + geom_georaster(aes(geofield = forecast), filter(t2m, lead_time == 36)) + geom_path(aes(x, y), mmm) + facet_wrap(vars(member)) + scale_fill_viridis_c(limits = c(-20, 5), oob = scales::oob_squish)
ggplot() + geom_georaster(aes(geofield = forecast), filter(t2m, lead_time == 36)) + geom_path(aes(x, y), mmm) + facet_wrap(vars(member)) + scale_fill_viridis_c(oob = scales::oob_squish)
plot(meteogrid::subgrid(t2m$forecast[[1]], 100, 200, 400, 900))
plot(meteogrid::subgrid(t2m$forecast[[1]], 100, 400, 400, 900))
plot(meteogrid::subgrid(t2m$forecast[[1]], 100, 400, 400, 700))
t2m <- mutate(t2m, svalbard = as_geolist(lapply(forecast, function(x) meteogrid::subgrid(x, 100, 400, 400, 700))))
t2m <- mutate(t2m, svalbard = harpIO:::as_geolist(lapply(forecast, function(x) meteogrid::subgrid(x, 100, 400, 400, 700))))
sss <- get_domain(rnaturalearthhires::coastline10, dom = get_domain(t2m, svalbard))
t2m
get_domain(t2m, svalbard)
sss <- get_domain(rnaturalearthhires::coastline10, dom = get_domain(t2m, svalbard))
get_domain(t2m, svalbard) -> sdom
sss <- get_map(rnaturalearthhires::coastline10, dom = get_domain(t2m, svalbard))
sss <- get_map(rnaturalearthhires::coastline10, dom = get_domain(t2m, svalbard), poly = FALSE)
sss
ggplot() + geom_georaster(aes(geofield = svalbard), filter(t2m, lead_time == 36)) + geom_path(aes(x, y), sss) + facet_wrap(vars(member)) + scale_fill_viridis_c(oob = scales::oob_squish)
ggplot() + geom_georaster(aes(geofield = svalbard), filter(t2m, member == "mbr002")) + geom_path(aes(x, y), sss) + facet_wrap(vars(lead_time)) + scale_fill_viridis_c(oob = scales::oob_squish)
ggplot() + geom_georaster(aes(geofield = svalbard), filter(t2m, lead_time == 12)) + geom_path(aes(x, y), sss) + facet_wrap(vars(member)) + scale_fill_viridis_c(oob = scales::oob_squish)
ggplot() + geom_georaster(aes(geofield = svalbard), filter(t2m, lead_time == 12)) + geom_path(aes(x, y), sss) + facet_wrap(vars(member)) + scale_fill_viridis_c(limits = c(0, 15), oob = scales::oob_squish)
t2m
group_by(t2m, lead_time) %>% mutate(diff = svalbard - svalbard[[1]])
inner_join(t2m, select(filter(t2m, member == mbr000), -lead_time, -validdate))
inner_join(t2m, select(filter(t2m, member == "mbr000"), -lead_time, -validdate))
inner_join(t2m, select(filter(t2m, member == "mbr000"), -lead_time, -validdate, -member))
t2m
inner_join(t2m, select(filter(t2m, member == mbr000), -member))
inner_join(t2m, select(filter(t2m, member == "mbr000!), -member))
inner_join(t2m, select(filter(t2m, member == "mbr000"), -member))
inner_join(t2m, transmute(filter(t2m, member == "mbr000"), fcdate, lead_time, m0 = svalbard))
inner_join(t2m, transmute(filter(t2m, member == "mbr000"), fcdate, lead_time, m0 = svalbard)) -> t2m
ggplot() + geom_georaster(aes(geofield = svalbard - m0), filter(t2m, lead_time == 12)) + geom_path(aes(x, y), sss) + facet_wrap(vars(member)) + scale_fill_viridis_c(limits = c(0, 15), oob = scales::oob_squish)
ggplot() + geom_georaster(aes(geofield = svalbard - m0), filter(t2m, lead_time == 12)) + geom_path(aes(x, y), sss) + facet_wrap(vars(member)) + scale_fill_viridis_c(limits = c(NA, NA), oob = scales::oob_squish)
ggplot() + geom_georaster(aes(geofield = svalbard - m0), filter(t2m, lead_time == 12)) + geom_path(aes(x, y), sss) + facet_wrap(vars(member)) + scale_fill_viridis_c(limits = c(-8, 8), oob = scales::oob_squish)
ggplot() + geom_georaster(aes(geofield = svalbard - m0), filter(t2m, lead_time == 12)) + geom_path(aes(x, y), sss) + facet_wrap(vars(member)) + scale_fill_distiller(limits = c(-8, 8), oob = scales::oob_squish, palette = "RdBu")
ggplot() + geom_georaster(aes(geofield = svalbard - m0), filter(t2m, lead_time == 12)) + geom_path(aes(x, y), sss) + facet_wrap(vars(member)) + scale_fill_distiller(limits = c(-4, 4), oob = scales::oob_squish, palette = "RdBu")
ggplot() + geom_georaster(aes(geofield = svalbard - m0), filter(t2m, lead_time == 12)) + geom_path(aes(x, y), sss, colour = "#777777") + facet_wrap(vars(member)) + scale_fill_distiller(limits = c(-4, 4), oob = scales::oob_squish, palette = "RdBu")
ggplot() + geom_georaster(aes(geofield = svalbard - m0), filter(t2m, lead_time == 12)) + geom_path(aes(x, y), sss, colour = "#777777") + facet_wrap(vars(member)) + scale_fill_distiller(limits = c(-4, 4), oob = scales::oob_squish, palette = "RdBu") + coord_equal() + theme_harp_map()
ggplot() + geom_georaster(aes(geofield = svalbard - m0), filter(t2m, lead_time == 12)) + geom_path(aes(x, y), sss, colour = "#777777") + facet_wrap(vars(member)) + scale_fill_distiller(limits = c(-4, 4), oob = scales::oob_squish, palette = "RdBu") + coord_equal(expand = FALSE) + theme_harp_map()
ggplot() + geom_georaster(aes(geofield = svalbard - m0), filter(t2m, lead_time == 0)) + geom_path(aes(x, y), sss, colour = "#777777") + facet_wrap(vars(member)) + scale_fill_distiller(limits = c(-4, 4), oob = scales::oob_squish, palette = "RdBu") + coord_equal(expand = FALSE) + theme_harp_map()
ggplot() + geom_georaster(aes(geofield = svalbard - m0), filter(t2m, lead_time == 0, member == "mbr003")) + geom_path(aes(x, y), sss, colour = "#777777") + scale_fill_distiller(limits = c(-4, 4), oob = scales::oob_squish, palette = "RdBu") + coord_equal(expand = FALSE) + theme_harp_map()
ggplot() + geom_georaster(aes(geofield = svalbard - m0), filter(t2m, lead_time == 0, member == "mbr003")) + geom_path(aes(x, y), sss, colour = "#777777") + scale_fill_distiller(NULL, limits = c(-4, 4), oob = scales::oob_squish, palette = "RdBu") + coord_equal(expand = FALSE) + theme_harp_map()
ggplot() + geom_georaster(aes(geofield = svalbard - m0), filter(t2m, lead_time == 0, member == "mbr003")) + geom_path(aes(x, y), sss, colour = "#777777") + scale_fill_distiller(NULL, limits = c(-4, 4), oob = scales::oob_squish, palette = "RdBu") + coord_equal(expand = FALSE) + theme_harp_map() + theme(legend.position = "none")
ggsave("/home/andrewts/Documents/arctic_risk_nov2022/pert_map.png")
ggplot() + geom_georaster(aes(geofield = svalbard - m0), filter(t2m, lead_time == 0, member == "mbr000")) + geom_path(aes(x, y), sss, colour = "#777777") + scale_fill_distiller(NULL, limits = c(-NA, NA), oob = scales::oob_squish, palette = "Spectral") + coord_equal(expand = FALSE) + theme_harp_map() + theme(legend.position = "none")
ggplot() + geom_georaster(aes(geofield = svalbard - m0), filter(t2m, lead_time == 0, member == "mbr000")) + geom_path(aes(x, y), sss, colour = "#777777") + scale_fill_distiller(NULL, limits = c(NA, NA), oob = scales::oob_squish, palette = "Spectral") + coord_equal(expand = FALSE) + theme_harp_map() + theme(legend.position = "none")
ggplot() + geom_georaster(aes(geofield = svalbard), filter(t2m, lead_time == 0, member == "mbr000")) + geom_path(aes(x, y), sss, colour = "#777777") + scale_fill_distiller(NULL, limits = c(NA, NA), oob = scales::oob_squish, palette = "Spectral") + coord_equal(expand = FALSE) + theme_harp_map() + theme(legend.position = "none")
ggplot() + geom_georaster(aes(geofield = svalbard), filter(t2m, lead_time == 0, member == "mbr000")) + geom_path(aes(x, y), sss, colour = "#777777") + scale_fill_distiller(NULL, limits = c(NA, NA), oob = scales::oob_squish, palette = "Spectral") + coord_equal(expand = FALSE) + theme_harp_map()
ggplot() + geom_georaster(aes(geofield = svalbard), filter(t2m, lead_time == 0, member == "mbr000")) + geom_path(aes(x, y), sss, colour = "#777777") + scale_fill_distiller(NULL, limits = c(NA, 20), oob = scales::oob_squish, palette = "Spectral") + coord_equal(expand = FALSE) + theme_harp_map()
ggsave("/home/andrewts/Documents/arctic_risk_nov2022/time_0.png")
ggsave("/home/andrewts/Documents/arctic_risk_nov2022/time_0.png", width = 7, height = 8)
ggplot() + geom_georaster(aes(geofield = svalbard), filter(t2m, lead_time == 0, member == "mbr000")) + geom_path(aes(x, y), sss, colour = "#777777") + scale_fill_distiller(NULL, limits = c(NA, 20), oob = scales::oob_squish, palette = "Spectral") + coord_equal(expand = FALSE) + theme_harp_map() + theme(legend.position = "none")
ggsave("/home/andrewts/Documents/arctic_risk_nov2022/time_0.png", width = 7.8, height = 8)
ggplot() + geom_georaster(aes(geofield = svalbard), filter(t2m, lead_time == 12, member == "mbr000")) + geom_path(aes(x, y), sss, colour = "#777777") + scale_fill_distiller(NULL, limits = c(NA, 20), oob = scales::oob_squish, palette = "Spectral") + coord_equal(expand = FALSE) + theme_harp_map() + theme(legend.position = "none")
ggplot() + geom_georaster(aes(geofield = svalbard), filter(t2m, lead_time == 0, member == "mbr000")) + geom_path(aes(x, y), sss, colour = "#777777") + scale_fill_distiller(NULL, limits = c(NA, 20), oob = scales::oob_squish, palette = "Spectral") + coord_equal(expand = FALSE) + theme_harp_map()
ggplot() + geom_georaster(aes(geofield = svalbard), filter(t2m, lead_time == 0, member == "mbr000")) + geom_path(aes(x, y), sss, colour = "#777777") + scale_fill_distiller(NULL, limits = c(-5, 20), oob = scales::oob_squish, palette = "Spectral") + coord_equal(expand = FALSE) + theme_harp_map()
ggplot() + geom_georaster(aes(geofield = svalbard), filter(t2m, lead_time == 0, member == "mbr000")) + geom_path(aes(x, y), sss, colour = "#777777") + scale_fill_distiller(NULL, limits = c(-4, 20), oob = scales::oob_squish, palette = "Spectral") + coord_equal(expand = FALSE) + theme_harp_map()
ggsave("/home/andrewts/Documents/arctic_risk_nov2022/time_0.png", width = 7.8, height = 8)
ggplot() + geom_georaster(aes(geofield = svalbard), filter(t2m, lead_time == 12, member == "mbr000")) + geom_path(aes(x, y), sss, colour = "#777777") + scale_fill_distiller(NULL, limits = c(-5, 20), oob = scales::oob_squish, palette = "Spectral") + coord_equal(expand = FALSE) + theme_harp_map()
ggplot() + geom_georaster(aes(geofield = svalbard), filter(t2m, lead_time == 12, member == "mbr001")) + geom_path(aes(x, y), sss, colour = "#777777") + scale_fill_distiller(NULL, limits = c(-5, 20), oob = scales::oob_squish, palette = "Spectral") + coord_equal(expand = FALSE) + theme_harp_map()
ggplot() + geom_georaster(aes(geofield = svalbard), filter(t2m, lead_time == 24, member == "mbr001")) + geom_path(aes(x, y), sss, colour = "#777777") + scale_fill_distiller(NULL, limits = c(-5, 20), oob = scales::oob_squish, palette = "Spectral") + coord_equal(expand = FALSE) + theme_harp_map()
ggplot() + geom_georaster(aes(geofield = svalbard), filter(t2m, lead_time == 36, member == "mbr001")) + geom_path(aes(x, y), sss, colour = "#777777") + scale_fill_distiller(NULL, limits = c(-5, 20), oob = scales::oob_squish, palette = "Spectral") + coord_equal(expand = FALSE) + theme_harp_map()
ggplot() + geom_georaster(aes(geofield = svalbard), filter(t2m, lead_time == 12, member == "mbr001")) + geom_path(aes(x, y), sss, colour = "#777777") + scale_fill_distiller(NULL, limits = c(-5, 20), oob = scales::oob_squish, palette = "Spectral") + coord_equal(expand = FALSE) + theme_harp_map()
ggplot() + geom_georaster(aes(geofield = svalbard), filter(t2m, lead_time == 36, member == "mbr001")) + geom_path(aes(x, y), sss, colour = "#777777") + scale_fill_distiller(NULL, limits = c(-5, 20), oob = scales::oob_squish, palette = "Spectral") + coord_equal(expand = FALSE) + theme_harp_map()
ggplot() + geom_georaster(aes(geofield = svalbard), filter(t2m, lead_time == 36, member == "mbr001")) + geom_path(aes(x, y), sss, colour = "#777777") + scale_fill_distiller(NULL, limits = c(-5, 20), oob = scales::oob_squish, palette = "Spectral") + coord_equal(expand = FALSE) + theme_harp_map() + theme(legend.position = "none")
ggsave("/home/andrewts/Documents/arctic_risk_nov2022/uncertain.png", width = 7.8, height = 8)
ggplot() + geom_georaster(aes(geofield = svalbard), filter(t2m, lead_time == 0, member == "mbr000")) + geom_path(aes(x, y), sss, colour = "#777777") + scale_fill_distiller(NULL, limits = c(-5, 20), oob = scales::oob_squish, palette = "Spectral") + coord_equal(expand = FALSE) + theme_harp_map() + theme(legend.position = "none")
ggsave("/home/andrewts/Documents/arctic_risk_nov2022/time_0.png", width = 7.8, height = 8)
ggplot() + geom_georaster(aes(geofield = svalbard - m0), filter(t2m, lead_time == 0, member == "mbr003")) + geom_path(aes(x, y), sss, colour = "#777777") + scale_fill_distiller(NULL, limits = c(-5, 5), oob = scales::oob_squish, palette = "RdBu") + coord_equal(expand = FALSE) + theme_harp_map()
ggplot() + geom_georaster(aes(geofield = svalbard - m0), filter(t2m, lead_time == 0, member == "mbr003")) + geom_path(aes(x, y), sss, colour = "#777777") + scale_fill_distiller(NULL, limits = c(-5, 5), oob = scales::oob_squish, palette = "RdBu") + coord_equal(expand = FALSE) + theme_harp_map() + theme(legend.position = "none")
ggsave("/home/andrewts/Documents/arctic_risk_nov2022/pert.png", width = 7.8, height = 8)
ggplot() + geom_georaster(aes(geofield = svalbard), filter(t2m, lead_time == 12, member == "mbr000")) + geom_path(aes(x, y), sss, colour = "#777777") + scale_fill_distiller(NULL, limits = c(-5, 20), oob = scales::oob_squish, palette = "Spectral") + coord_equal(expand = FALSE) + theme_harp_map() + theme(legend.position = "none")
ggplot() + geom_georaster(aes(geofield = svalbard), filter(t2m, lead_time == 12, member == "mbr001")) + geom_path(aes(x, y), sss, colour = "#777777") + scale_fill_distiller(NULL, limits = c(-5, 20), oob = scales::oob_squish, palette = "Spectral") + coord_equal(expand = FALSE) + theme_harp_map() + theme(legend.position = "none")
ggplot() + geom_georaster(aes(geofield = svalbard), filter(t2m, lead_time == 12, member == "mbr000")) + geom_path(aes(x, y), sss, colour = "#777777") + scale_fill_distiller(NULL, limits = c(-5, 20), oob = scales::oob_squish, palette = "Spectral") + coord_equal(expand = FALSE) + theme_harp_map() + theme(legend.position = "none")
ggplot() + geom_georaster(aes(geofield = svalbard), filter(t2m, lead_time == 12, member == "mbr000")) + geom_path(aes(x, y), sss, colour = "#777777") + scale_fill_distiller(NULL, limits = c(-5, 20), oob = scales::oob_squish, palette = "Spectral") + coord_equal(expand = FALSE) + theme_harp_map() + theme(legend.position = "none")
ggsave("/home/andrewts/Documents/arctic_risk_nov2022/fcst.png", width = 7.8, height = 8)
ggplot() + geom_georaster(aes(geofield = svalbard), filter(t2m, lead_time == 12, member == "mbr001")) + geom_path(aes(x, y), sss, colour = "#777777") + scale_fill_distiller(NULL, limits = c(-5, 20), oob = scales::oob_squish, palette = "Spectral") + coord_equal(expand = FALSE) + theme_harp_map() + theme(legend.position = "none")
ggsave("/home/andrewts/Documents/arctic_risk_nov2022/certain.png", width = 7.8, height = 8)
ggplot() + geom_georaster(aes(geofield = forecast), filter(t2m, lead_time == 12, member == "mbr001")) + geom_path(aes(x, y), mmm, colour = "#777777") + scale_fill_distiller(NULL, limits = c(-5, 20), oob = scales::oob_squish, palette = "Spectral") + coord_equal(expand = FALSE) + theme_harp_map() + theme(legend.position = "none")
ggplot() + geom_georaster(aes(geofield = forecast), filter(t2m, lead_time == 12, member == "mbr001")) + geom_path(aes(x, y), mmm, colour = "#777777") + scale_fill_distiller(NULL, limits = c(-5, NA), oob = scales::oob_squish, palette = "Spectral") + coord_equal(expand = FALSE) + theme_harp_map() + theme(legend.position = "none")
ggplot() + geom_georaster(aes(geofield = forecast), filter(t2m, lead_time == 12, member == "mbr001")) + geom_path(aes(x, y), mmm, colour = "#777777") + scale_fill_distiller(NULL, limits = c(NA, NA), oob = scales::oob_squish, palette = "Spectral") + coord_equal(expand = FALSE) + theme_harp_map() + theme(legend.position = "none")
ggsave("/home/andrewts/Documents/arctic_risk_nov2022/first_guess.png", width = 7.8, height = 8)
library(harp)
fcst <- read_point_forecast(2018030800, 2018031500, "REF", "eps", "T2m", file_path = "/lustre/storeB/project/nwp/alertness/wp4/harp/FCTABLE", members = 0)
fcst
ggplot(filter(fcst, SID == 1001), aes(validdate, REF_mbr000, group = fcdate)) + geom_line()
ggplot(filter(fcst$REF, SID == 1001), aes(validdate, REF_mbr000, group = fcdate)) + geom_line()
ggplot(filter(fcst$REF, SID == 1001), aes(validdate, REF_mbr000, colour = fcdate)) + geom_line()
ggplot(filter(fcst$REF, SID == 1001), aes(validdate, REF_mbr000, colour = factor(fcdate))) + geom_line()
ggplot(filter(fcst$REF, SID == 1001), aes(validdate, REF_mbr000, group = factor(fcdate))) + geom_line()
ggplot(filter(fcst$REF, SID == 1001), aes(validdate, REF_mbr000, colour = factor(fcdate))) + geom_line()
ggplot() + geom_georaster(aes(geofield = forecast), filter(t2m, lead_time == 12, member == "mbr001")) + geom_path(aes(x, y), mmm, colour = "#777777") + scale_fill_distiller(NULL, limits = c(NA, NA), oob = scales::oob_squish, palette = "Spectral") + coord_equal(expand = FALSE) + theme_harp_map() + theme(legend.position = "none")
ggplot() + geom_georaster(aes(geofield = forecast), filter(t2m, lead_time == 0, member == "mbr001")) + geom_path(aes(x, y), mmm, colour = "#777777") + scale_fill_distiller(NULL, limits = c(NA, NA), oob = scales::oob_squish, palette = "Spectral") + coord_equal(expand = FALSE) + theme_harp_map() + theme(legend.position = "none")
ggsave("/home/andrewts/Documents/arctic_risk_nov2022/init.png", width = 7.8, height = 8)
